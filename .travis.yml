language: cpp
sudo: false

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - build-essential
    - g++-4.8
    - gcc-4.8
    - lib32bz2-1.0
    - lib32ncurses5
    - lib32z1

before_install:
# install the quantracker dependencies
   - echo retrieving and building the installer
   - mkdir air_installer_tmp && cd air_installer_tmp
   - wget https://github.com/kwikius/air_installer/archive/install_test.zip
   - unzip install_test.zip
   - cd air_installer-install_test
   - make clean && make CXX="g++-4.8"
   - mkdir /home/travis/ap_lib
   - mkdir /home/travis/ap_bin
   - echo executing the installer
   - make execute
   - cd ../
   - echo cleaning up the installer
   - rm -rf air_installer_tmp
   - cd ../

install:
   - echo building the quantracker libs
   - cd /home/travis/ap_lib/quantracker && make osd_libs
   - cd /home/travis/build/kwikius/ardupilot/ArduPlane
   - export QUAN_TARGET_VEHICLE=QUAN_APM_ARDUPLANE
   - export QUANTRACKER_ROOT_DIR=/home/travis/ap_lib/quantracker/
   
script: > 
    make quan 
    && cd /home/travis/build/kwikius/ardupilot/libraries/AP_HAL_Quan/test/AnalogIn && make quan 
    && cd ../GPIO && make quan
    && cd ../RCInput && make quan
    && cd ../RCOutput && make quan

